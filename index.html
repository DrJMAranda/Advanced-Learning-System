<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SEA~ALS - Core System (MP4 Playback Only)</title>
        <style>
            /* VROOGLY: GLOBAL ORDER AND STRUCTURAL MAP */
            body { margin: 0; padding: 0; background-color: #000; font-size: 16px; color: #00ff00; }
            .outer-flexbox { display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; width: 100vw; overflow: hidden; }

            /* VROOGLY: INNER GRID (Minimal Vertical Stack) */
            .inner-grid-container {
                display: grid;
                grid-template-columns: repeat(5, 1fr); 
                grid-template-rows: 0.2fr 3.6fr 0.2fr; 
                width: 100%; max-width: 1200px; height: 100vh; 
            }

            /* VROOGLY: TTM & STATUS BAR (Consolidated into the top row) */
            .status-header {
                grid-column: 1 / span 5; grid-row: 1; 
                display: flex; justify-content: space-between; align-items: center;
                padding: 5px 10px; font-family: 'Courier New', monospace;
            }
            .ttm-output { white-space: nowrap; flex-grow: 1; text-align: left; padding-right: 10px; color: #00ff00; }

            /* VROOGLY: STRUCTURAL INTEGRITY FIX - 20ch WIDTH COMPLIANCE */
            .monospaced-compliance {
                font-family: 'EB Garamond Mono', 'Courier New', monospace;
                font-size: 14pt; 
                width: 20ch; 
                max-width: 20ch;
                min-width: 20ch;
                overflow: hidden;
                white-space: nowrap;
                text-align: center;
            }

            /* VROOGLY: Large Text/Image Holon Definitions */
            .story-content-area {
                grid-column: 1 / span 5; grid-row: 3; 
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 10px 20px;
                font-size: 1.1em;
            }
            .story-content-area img { max-width: 100px; height: auto; }

            /* VROOGLY: High-Density Text Bar Definition */
            .minimal-text-bar {
                position: absolute;
                bottom: 0; 
                left: 50%;
                transform: translateX(-50%);
                padding: 4px 0;
                background-color: #000;
                z-index: 100;
            }
            
            /* VROOGLY: THE CENTRAL HOLON (VidMon container) */
            .viewmon-container {
                grid-column: 1 / span 5; grid-row: 2; 
                background-color: #000;
                display: flex; flex-direction: column;
                aspect-ratio: 16 / 9;
                width: 90%; margin: 0 auto; position: relative;
                border: 5px solid #333; border-radius: 8px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.8); 
            }
            .vidmon-display {
                flex-grow: 1; background-color: black; position: relative;
            }
            .vidmon-display video { width: 100%; height: 100%; object-fit: contain; }
            .vidmon-display::after {
                content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                background: repeating-linear-gradient(#00000000, #00000000 1px, #0a0a0a33 1px, #0a0a0a33 2px);
                opacity: 0.1; pointer-events: none; 
            }
            
            /* VROOGLY: THE ACTION HOLON (CONTROLS ROW) */
            .controls-row {
                order: -1; 
                display: flex; justify-content: space-between; align-items: center;
                padding: 5px 5px; width: 100%;
                gap: 10px; 
                background-color: #333; 
            }
            .control-btn {
                width: 67px; height: 67px; display: flex; justify-content: center; align-items: center;
                background-color: #555; color: #fff; border: 2px solid #888; border-radius: 4px;
                font-weight: bold; cursor: pointer; box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
                font-size: 28px; 
            }

            /* ----------------------------------------------------------------- */
            /* VROOGLY: STRUCTURAL TRANSFORMATION - MOBILE BREAKPOINT ENFORCEMENT */
            /* ----------------------------------------------------------------- */
            @media (max-width: 600px) {
                /* 1. STRUCTURAL ELIMINATION: Hide the large, chaotic elements */
                .story-content-area, .metadata-item.id-registro {
                    display: none !important;
                }
                
                /* 2. STRUCTURAL ACTIVATION: Activate the high-density text bar */
                #high-density-text-bar {
                    display: block !important;
                }

                /* 3. CONSOLIDATE STATUS: Ensure TTM output uses maximum width available */
                .ttm-output {
                    width: auto;
                    flex-grow: 1; 
                }
            }

        </style>
    </head>
    <body>
        
        <div class="outer-flexbox">
            <div class="inner-grid-container">
                
                <div class="status-header">
                    <div class="metadata-item id-registro">ID: G-1001 / REL: M-45</div>
                    <div class="ttm-output" id="ttm-output">L1: 00:00/00:00 VIDEO MODE</div>
                    <div class="action-status-zone monospaced-compliance"><p id="feedback-message">AWAITING MEDIA LOAD</p></div>
                </div>

                <div class="viewmon-container">
                    
                    <div class="controls-row">
                        <button data-control="5" class="control-btn" title="Fast Forward/End">⏭</button>
                        <button data-control="2" class="control-btn" title="Restart/A">|◀</button>
                        <button data-control="3" class="control-btn" title="Rewind/B">⏪</button>
                        <button data-control="4" class="control-btn" title="Play/Pause">▶</button>
                        <button data-control="1" class="control-btn" title="Exit/Eject">↩</button>
                    </div>

                    <div class="vidmon-display">
                        <video id="viewmon-video" controlsList="nodownload" disablepictureinpicture src="http://your.video.source/default.mp4"></video> 
                        <div id="high-density-text-bar" class="monospaced-compliance minimal-text-bar" style="display: none;"></div> 
                    </div>
                </div>
                
                <div class="story-content-area">
                    <p>The Boy Who Cried Wolf...</p>
                    <img src="placeholder.jpg" alt="Boy and Sheep" />
                </div>
            </div>
        </div>
        
        <script>
            // --- JAVASCRIPT: THE INTELLIGENT ENTITY (IE) ---
            
            // 24. VROOGLY: DATA SCHEMA (GIT PENSUM - STRUCTURAL CONTRACT) - Quizzes removed
            const GIT_Module_Data = {
                // IMPORTANT: Replace this with the actual MP4 file URL when ready.
                video_url: "https://storage.googleapis.com/noenbalde/Curriculum/Language/Literature/LLAesop1.mp4",
                video_duration_sec: 192, 
                tasks: []
            };

            // 25. VROOGLY: GLOBAL STATE - Simplified
            let state = {
                videoTimeFrozen: 0 
            };
            
            // VROOGLY: TIME FORMATTER
            const formatTime = (seconds) => {
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            // VROOGLY: TIME SYNCHRONIZATION LOGIC (Simplified for MP4 playback)
            const syncSupportLayers = () => {
                const video = document.getElementById('viewmon-video');
                const ttmOutput = document.getElementById('ttm-output');
                const feedbackMessageEl = document.getElementById('feedback-message');
                
                if (!video || isNaN(video.duration)) {
                    ttmOutput.textContent = `L1: 00:00/00:00 LOADING...`;
                    feedbackMessageEl.textContent = "AWAITING MEDIA LOAD";
                    return;
                }

                // VROOGLY: Simplified TTM Output (Current time / Total duration | Status)
                const currentTime = video.currentTime;
                const duration = video.duration;
                const status = video.paused ? 'PAUSED' : 'RUNNING';

                const newTtmText = `L1: ${formatTime(currentTime)}/${formatTime(duration)} ${status}`;
                ttmOutput.textContent = newTtmText;
                
                // VROOGLY: Mobile high-density text bar update
                const textBar = document.getElementById('high-density-text-bar');
                if (textBar) {
                    textBar.textContent = status.substring(0, 20); 
                }
                
                // VROOGLY: Update Play/Pause Button Icon
                document.querySelector('[data-control="4"]').textContent = video.paused ? '▶' : '⏸';
                
                feedbackMessageEl.textContent = status === 'RUNNING' ? "Playing." : "Paused.";
            };
            
            // VROOGLY: CONTROL CLICK HANDLER (Action Holon Logic - Simplified)
            const handleControlClick = (event) => {
                const controlNumber = event.currentTarget.dataset.control;
                const video = document.getElementById('viewmon-video');
                
                if (!video || isNaN(video.duration)) { 
                    document.getElementById('feedback-message').textContent = "ERROR: Media not loaded.";
                    return; 
                }

                if (controlNumber === '4') { 
                    // Play / Pause Toggle
                    if (video.paused) {
                        video.play();
                    } else {
                        video.pause();
                    }
                } else if (controlNumber === '3') { 
                    // Rewind 10s
                    video.currentTime = Math.max(0, video.currentTime - 10); 
                } else if (controlNumber === '2') {
                    // Restart
                    video.currentTime = 0;
                    video.pause();
                } else if (controlNumber === '5') {
                    // Fast Forward/End
                    video.currentTime = video.duration;
                    video.pause();
                }
                syncSupportLayers();
            };

            // VROOGLY: THE DIGITAL ACTIVATION MAP (Simplified)
            const KEY_MAPPING = {
                'Digit4': '4', 'Space': '4', // Space for Play/Pause
                'Digit3': '3', 
                'Digit2': '2',
                'Digit5': '5'
            };
            
            // VROOGLY: THE KEYBOARD BINDING (Simplified)
            const handleGlobalKeyPress = (event) => {
                const mappedControl = KEY_MAPPING[event.code];
                
                if (mappedControl) {
                    const targetButton = document.querySelector(`[data-control="${mappedControl}"]`);
                    if (targetButton && !targetButton.disabled) {
                        targetButton.click(); 
                        event.preventDefault(); 
                    }
                }
            };
            
            // VROOGLY: INITIALIZATION 
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelectorAll('.control-btn').forEach(button => {
                    button.addEventListener('click', handleControlClick);
                });
                
                document.addEventListener('keydown', handleGlobalKeyPress);
                
                const video = document.getElementById('viewmon-video');
                if (video) {
                    video.src = GIT_Module_Data.video_url;
                    
                    // The core logic for playback:
                    video.addEventListener('loadedmetadata', syncSupportLayers);
                    video.addEventListener('timeupdate', syncSupportLayers); // Used for time/status display
                    video.addEventListener('pause', syncSupportLayers);
                    video.addEventListener('play', syncSupportLayers);
                    video.addEventListener('ended', syncSupportLayers);

                    syncSupportLayers(); 
                }
            });
            // VROOGLY: END OF IE REGULATOR CORE LOGIC
        </script>
    </body>
</html>
