<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Learning Systems</title>
    
    <style>
        /* --- ARCHITECTURAL SKELETON: T-STRUCTURE ENFORCEMENT (SCROLL FIX) --- */
        html, body {
            height: 100%; 
            margin: 0;
            padding: 0;
            overflow-x: hidden; 
            overflow-y: auto;  
            font-family: 'EB Garamond', serif;
            background-color: #f4f4f4; 
        }

        .main-container {
            display: flex; 
            min-height: 100vh; 
            width: 100%;
        }

        /* --- CONTENT AREA (SCROLLABLE LEFT - 12, 9, 6 O'CLOCK ZONES) --- */
        .content-area {
            order: 1; 
            flex-grow: 1; 
            overflow-y: scroll; /* <-- This controls the scroll for the main learning content */
            padding: 10px 20px 20px 20px; 
            box-sizing: border-box;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            
            display: flex;
            flex-direction: column; 
        }
        
        /* --- FIXED SIDEBAR (NON-SCROLLABLE RIGHT - 3 O'CLOCK ZONE) --- */
        .fixed-menu-container {
            order: 2; 
            flex-shrink: 0; 
            width: 350px; 
            height: 100vh; 
            padding: 20px 10px;
            background-color: #e9ecef;
            border-left: 1px solid #ccc;
            box-sizing: border-box;
            overflow-y: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* --- ZONE 9 PM: HORIZONTAL ICON BAR STYLE (COMPACT) --- */
        .horizontal-feature-bar {
            flex-shrink: 0; 
            width: 100%;
            height: 70px; 
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            margin: 10px 0; 
            
            display: flex; 
            overflow-x: auto; 
            overflow-y: hidden; 
            white-space: nowrap; 
            align-items: center; 
            padding: 0 5px; 
        }
        
        .icon-item {
            flex-shrink: 0;
            width: 90px; 
            height: 60px; 
            margin-right: 8px; 
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
            border-radius: 4px;
            overflow: hidden;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }

        .icon-item:hover {
            border-color: #007bff; 
        }

        .icon-item img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            display: block;
        }
        
        /* The main module content section (6 PM Zone) must grow to fill space and scroll */
        .module-content {
            flex-grow: 1;
        }
        
        /* --- VIDEO MODAL STYLES (Used for Full Screen) --- */
        .video-modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.95);
            display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .video-container { 
            max-width: 90%; 
            max-height: 90%; 
            position: relative; 
            width: 80vw; 
            max-width: 1000px;
            padding-top: 45vw; 
            max-height: calc(100vh - 100px); 
            
        }
        #myVideoElement { 
            position: absolute; 
            top: 0; left: 0; width: 100%; height: 100%; 
            display: block; 
        }
        
        #closeVideoBtn { 
            position: absolute; 
            bottom: -50px; 
            left: 50%; 
            transform: translateX(-50%);
            padding: 10px 25px; 
            background-color: #dc3545; 
            color: white; 
            border: none; 
            border-radius: 5px;
            cursor: pointer; 
            z-index: 1001; 
            font-size: 1.1em;
        }
        
        /* Sidebar Menu Styles (3 PM Zone) */
        .fixed-menu-list { list-style-type: none; padding: 0; margin: 0; }
        .fixed-menu-item a { text-decoration: none; color: #000; font-size: .9em; font-weight: bold; display: block; padding: 10px 0; border-bottom: 1px solid #ddd; }
        .fixed-menu-header { border-bottom: 2px solid #ccc; padding-bottom: 10px; margin-bottom: 10px; }
        .powered-by-gemini, .credits-box p { font-size: 0.8em; color: #6c757d; }
        
        /* Style for video links in content modules */
        .vid-link {
            cursor: pointer;
            text-decoration: underline;
        }

        /* Custom Control Bar Styles */
        .custom-controls {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            background-color: #343a40; /* Dark background for controls */
            border-radius: 0 0 4px 4px;
            margin-bottom: 15px; 
            align-items: center;
        }

        .control-btn {
            padding: 8px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s;
        }

        .control-btn:hover {
            background-color: #0056b3;
        }

        .control-btn.stop-btn {
            background-color: #dc3545;
        }
        
        .control-btn.clear-btn {
            background-color: #6c757d; /* Grey/Muted for the 'Clear' function */
        }
        
        .control-btn.clear-btn:hover {
            background-color: #5a6268;
        }


        .control-btn.stop-btn:hover {
            background-color: #c82333;
        }
        
        /* --- COLLAPSIBLE ROW STYLES (Loadable Rows) --- */
        .collapsible-header {
            cursor: pointer;
            padding: 10px 15px;
            margin: 10px 0;
            background-color: #e3f2fd; 
            color: #000; 
            font-size: 1.1em;
            border-left: 5px solid #007bff; 
            border-radius: 4px;
            user-select: none;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* Specific header colors override default */
        #lang-module .collapsible-header { border-left-color: #6a0dad; background-color: #f3e5f5; }
        #sci-module .collapsible-header { border-left-color: #008080; background-color: #e0f7fa; }
        #hist-module .collapsible-header { border-left-color: #9c6e31; background-color: #fff3e0; }
        #art-module .collapsible-header { border-left-color: #d81b60; background-color: #fce4ec; }
        #music-module .collapsible-header { border-left-color: #338800; background-color: #e8f5e9; }


        .collapsible-header:hover {
            opacity: 0.9;
        }
        
        .toggle-icon {
            font-size: 1.2em;
            transition: transform 0.3s;
        }

        .collapsible-content {
            max-height: 0; 
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s;
            padding: 0 15px;
            border: 1px solid #eee;
            border-top: none;
            margin-bottom: 10px;
        }
        
        .collapsible-content.active {
            max-height: 5000px; 
            padding: 10px 15px;
            border-radius: 0 0 4px 4px;
        }
        
        .collapsible-content ul {
            list-style-type: none;
            margin: 10px 0 10px 0;
            padding: 0;
        }
        
        /* Quiz specific styles */
        .quiz-option {
            padding: 8px;
            margin: 5px 0;
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .quiz-option:hover {
            background-color: #e9e9e9;
        }
        .correct {
            background-color: #d4edda; 
            border-color: #c3e6cb;
        }
        .incorrect {
            background-color: #f8d7da; 
            border-color: #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="main-container">
        
        <div class="content-area">
            
            <div class="video-aspect-ratio-container" id="monitor-container" style="position: relative; width: 100%; padding-top: 56.25%; background-color: #e0f2f1; margin-bottom: 10px;">
                
                <video id="mainVideoMonitor" preload="auto" oncontextmenu="return false;" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none;"></video>
                
                <div id="defaultCaratula" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #00796b;">
                    <p style="color: white; font-size: 1.5em; text-align: center;">Monitor Ready.</p>
                    <p style="color: white; font-size: 0.9em; text-align: center;">Click an icon below to load a video.</p>
                </div>
                
            </div>
            
            <div id="customControlBar" class="custom-controls" style="display: none;">
                <button id="playPauseBtn" class="control-btn">▶ Play</button>
                <button id="stopReturnBtn" class="control-btn stop-btn">■ Stop</button>
                <button id="clearMonitorBtn" class="control-btn clear-btn">Clear Monitor</button>
                <button id="fullscreenBtn" class="control-btn" style="background-color: #20c997;">View Full Screen</button>
            </div>

            <div id="icon-bar" class="horizontal-feature-bar">
                <a href="#" class="icon-item video-activator" data-video-key="video1"><img src="https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/The%20Journey%20Begins.jpg" alt="The Journey Begins"></a>
                <a href="#" class="icon-item video-activator" data-video-key="video2"><img src="https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Mr.%20Zero%2C%20The%20First%20Something.jpg" alt="Mr.%20Zero"></a>
                <a href="#" class="icon-item video-activator" data-video-key="video3"><img src="https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/The%20Numeral%20Family.jpg" alt="The%20Numeral%20Family"></a>
                <a href="#" class="icon-item video-activator" data-video-key="video4"><img src="https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Decillones.jpg" alt="Decillones"></a>
                <a href="#" class="icon-item video-activator" data-video-key="video5"><img src="https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Language%20Arts.jpg" alt="Vowel%20Sounds"></a>
                <a href="#" class="icon-item video-activator" data-video-key="video6"><img src="https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/dictionary-432043_640.jpg" alt="Vocabulary%2001-20"></a>
            </div>
            
            <div class="module-content">
                <h2>PENDING:     Interactive Practice Area</h2>
                <p>This area will house the core learning modules, quizzes, and practice excercises..</p>
                
                <div id="learningContentArea">
                    <h3 style="color: #007bff;">PENDING: Select a Module</h3>
                    <p>The **6 PM Interactive Practice Area** is not yet ready for dynamic content.</p>
                </div>
            </div>
        </div>
        
        <div class="fixed-menu-container">
            <div>
                <div class="fixed-menu-header">
                    <h3>PENDING: Fixed Outline/Links</h3>
                    <p class="powered-by-gemini">Powered by Google Gemini</p>
                </div>
                <ul class="fixed-menu-list">
                    <li class="fixed-menu-item"><a href="#math">1. Mr. Sunya-Sifr Zero</a></li>
                    <li class="fixed-menu-item"><a href="#lang">2. Numerals from 0 to 4</a></li>
                    <li class="fixed-menu-item"><a href="#sci">3. Numerals from 5 to 9</a></li>
                    <li class="fixed-menu-item"><a href="#hist">4. Decillones</a></li>
                    <li class="fixed-menu-item"><a href="#art">5. Enunciation 1</a></li>
                    <li class="fixed-menu-item"><a href="#music">6. Enuntiation 2</a></li>
                </ul>
            </div>
            <div class="credits-box">
                <p>.</p>
            </div>
        </div>
    </div>

    <div id="videoPlayerModal" class="video-modal-overlay">
        <div class="video-container">
            <video id="myVideoElement" controls preload="auto" class="responsive-video-player"></video> 
            <button id="closeVideoBtn">Return (X)</button>
        </div>
    </div>

    <script>
        // --- ZONE 9 PM ICON to VIDEO MAPPING ---
        const videoSources = {
            "video1": "https://storage.googleapis.com/noenbalde/Giddyap/AP1U1S1%20Meet%20The%20Digits.mp4",
            "video2": "https://storage.googleapis.com/noenbalde/Giddyap/04%20AP1U1S2%20Counting%20through%20Four.mp4",
            "video3": "https://storage.googleapis.com/noenbalde/Giddyap/AP1U1S3T5-9%20250928%202033%20TN.mp4",
            "video4": "https://storage.googleapis.com/noenbalde/Videos/Video%20Cien%20Diez%20Uno.mp4",
            "video5": "https://storage.googleapis.com/noenbalde/Lingu%C3%ADstica/Enunciation%2002.mp4",
            "video6": "https://storage.googleapis.com/noenbalde/Lingu%C3%ADstica/Vocabulary%2001-20.mp4",
            "video7": "https://storage.googleapis.com/noenbalde/Lingu%C3%ADstica/English%20Vowels.mp4",
            "video8": "https://storage.googleapis.com/noenbalde/Lingu%C3%ADstica/L2%201-10.mp4",  
            "video9": "https://storage.googleapis.com/noenbalde/Linguistica/Placeholder_Vocab_41-60.mp4",
            "video10": "https://storage.googleapis.com/noenbalde/Giddyap/Video%20Five%20Pennies.mp4",            
        }; 
        
        // --- ICON URL Mapping (for use as posters/carátulas) ---
        const iconSources = {
            "video1": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/The%20Journey%20Begins.jpg",
            "video2": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Mr.%20Zero%2C%20The%20First%20Something.jpg",
            "video3": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/The%20Numeral%20Family.jpg",
            "video4": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Decillones.jpg",
            "video5": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Vowels.jpg",
            "video6": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/dictionary-432043_640.jpg",
            "video7": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/dictionary-432043_640.jpg",
            "video8": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/english-teacher-9839206_1280.webp", 
            "video9": "https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Language%20Arts.jpg" 
            "video10": "https://storage.googleapis.com/noenbalde/Giddyap/Video%20Five%20Pennies.mp4" 
        };

        // Elements for the Main Monitor (12 NOON Zone)
        const mainVideoMonitor = document.getElementById('mainVideoMonitor');
        const defaultCaratula = document.getElementById('defaultCaratula');
        const customControlBar = document.getElementById('customControlBar');
        
        // Custom control buttons
        const monitorControls = {
            playPauseBtn: document.getElementById('playPauseBtn'),
            stopReturnBtn: document.getElementById('stopReturnBtn'),
            clearMonitorBtn: document.getElementById('clearMonitorBtn'),
            fullscreenBtn: document.getElementById('fullscreenBtn')
        };
        
        const learningContentArea = document.getElementById('learningContentArea'); 

        // Elements for the Modal (Full Screen)
        const videoPlayerModal = document.getElementById('videoPlayerModal');
        const modalVideoElement = document.getElementById('myVideoElement');
        const closeVideoBtn = document.getElementById('closeVideoBtn');
        
        let currentVideoUrl = ""; 
        let currentPosterUrl = ""; 

        // --- QUIZ DATA (Using the previous placeholder question) ---
        const scienceQuizQuestions = [
            {
                question: "What is the largest organ in the human body?",
                options: ["Heart", "Liver", "Skin", "Brain"],
                correctAnswer: "Skin"
            }
        ];
        let currentQuizIndex = 0; 
        let quizAnswered = false;
        
        // --- Core Video Logic Functions ---
        function showMonitorPoster() {
            if (currentVideoUrl) {
                mainVideoMonitor.pause();
                mainVideoMonitor.currentTime = 0; // Rewind to start
            }
            
            // This is the "Clear Screen / Turn Off TV" state
            mainVideoMonitor.style.display = 'none';
            defaultCaratula.style.display = 'flex';
            customControlBar.style.display = 'none'; // Hide controls 
            
            monitorControls.playPauseBtn.textContent = '▶ Play'; // Reset button text
        }
        
        function updatePlayPauseButton() {
            if (mainVideoMonitor.paused) {
                monitorControls.playPauseBtn.textContent = '▶ Play';
            } else {
                monitorControls.playPauseBtn.textContent = '⏸ Pause';
            }
        }
        
        // Listeners for custom controls and state management
        mainVideoMonitor.addEventListener('ended', () => {
             // When video ends, it pauses at the end and shows the poster
              mainVideoMonitor.setAttribute('poster', currentPosterUrl); 
              mainVideoMonitor.style.display = 'block';
              defaultCaratula.style.display = 'none';
              customControlBar.style.display = 'flex';
              monitorControls.playPauseBtn.textContent = '⟳ Replay';
        });
        
        mainVideoMonitor.addEventListener('pause', updatePlayPauseButton);
        mainVideoMonitor.addEventListener('play', () => {
              // Remove poster when playback starts
            mainVideoMonitor.removeAttribute('poster');
            updatePlayPauseButton();
        });
        
        monitorControls.playPauseBtn.addEventListener('click', () => {
            if (mainVideoMonitor.paused) {
                mainVideoMonitor.play();
            } else {
                mainVideoMonitor.pause();
            }
        });
        
        // **STOP BUTTON BEHAVIOR: Pause, Rewind, and show Poster (ready for re-play)**
        monitorControls.stopReturnBtn.addEventListener('click', () => {
            mainVideoMonitor.pause();
            mainVideoMonitor.currentTime = 0;
            // Show the poster, making it ready for a fresh play (preferred behavior)
            if (currentPosterUrl) {
                mainVideoMonitor.setAttribute('poster', currentPosterUrl); 
                mainVideoMonitor.style.display = 'block';
                defaultCaratula.style.display = 'none';
                customControlBar.style.display = 'flex';
                monitorControls.playPauseBtn.textContent = '▶ Play';
            } else {
                showMonitorPoster(); // Fallback to full clear if no poster is set
            }
        });
        
        // **CLEAR MONITOR BUTTON BEHAVIOR: Turn Off TV (Full Reset)**
        monitorControls.clearMonitorBtn.addEventListener('click', showMonitorPoster);


        monitorControls.fullscreenBtn.addEventListener('click', () => {
            if (currentVideoUrl) {
                launchVideoToModal(currentVideoUrl);
            }
        });

        function closeVideoWindow() {
            modalVideoElement.pause();
            modalVideoElement.src = "";
            videoPlayerModal.style.display = 'none';
        }

        function launchVideoToMonitor(url, posterUrl) {
            currentVideoUrl = url;
            currentPosterUrl = posterUrl;
            
            defaultCaratula.style.display = 'none';
            mainVideoMonitor.style.display = 'block';
            customControlBar.style.display = 'flex'; // Show custom controls
            
            // Set the poster before loading 
            mainVideoMonitor.setAttribute('poster', posterUrl); 

            // Load and play the video
            mainVideoMonitor.src = url;
            mainVideoMonitor.load();
            mainVideoMonitor.play();
        }

        function launchVideoToModal(url) {
            mainVideoMonitor.pause(); // Pause the small monitor when modal is opened
            modalVideoElement.src = url;
            modalVideoElement.load(); 
            modalVideoElement.play();
            videoPlayerModal.style.display = 'flex';
        }
        
        // --- Mathemágica Interactive Logic ---
        let currentCount = 0;
        const maxCount = 9;

        function bindMathCounter() {
            const counterBtn = document.getElementById('math-counter-btn');
            const feedbackSpan = document.getElementById('math-feedback');
            
            if (counterBtn) {
                currentCount = 0;
                counterBtn.textContent = `Start Counting (${currentCount})`;
                feedbackSpan.textContent = "Click to confirm the next digit is 1.";
                counterBtn.disabled = false; 

                counterBtn.addEventListener('click', () => {
                    if (currentCount < maxCount) {
                        currentCount++;
                        counterBtn.textContent = `Next Digit: (${currentCount})`;
                        feedbackSpan.textContent = `Click to confirm the next digit is ${currentCount + 1}.`;
                    } else if (currentCount === maxCount) {
                        counterBtn.textContent = "Sequence Complete!";
                        feedbackSpan.textContent = "You have confirmed the full sequence 0 through 9. Excellent!";
                        currentCount++; 
                        counterBtn.disabled = true; 
                    }
                });
            }
        }

        // --- Linguistica Interactive Logic ---
        function bindSpellingCheck() {
            const checkBtn = document.getElementById('lang-check-btn');
            const inputField = document.getElementById('lang-input');
            const feedbackDiv = document.getElementById('lang-spelling-feedback');
            const targetWord = "VOWEL"; 

            if (checkBtn) {
                checkBtn.addEventListener('click', () => {
                    const userInput = inputField.value.toUpperCase().trim();
                    feedbackDiv.style.fontWeight = 'bold';
                    
                    if (userInput === targetWord) {
                        feedbackDiv.style.color = '#28a745'; 
                        feedbackDiv.textContent = `Correct! You successfully spelled: ${targetWord}.`;
                        inputField.disabled = true;
                        checkBtn.disabled = true;
                    } else if (userInput.length === 0) {
                        feedbackDiv.style.color = '#ffc107'; 
                        feedbackDiv.textContent = `Please enter your spelling. (Target word has ${targetWord.length} letters).`;
                    } else {
                        feedbackDiv.style.color = '#dc3545'; 
                        feedbackDiv.textContent = `Incorrect. Try again. You entered "${userInput}".`;
                        inputField.value = ''; 
                    }
                });
            }
        }
        
        // --- Ciencia Quiz Logic ---
        function loadQuizQuestion(index) {
            const quizArea = document.getElementById('quiz-area');
            const questionElement = document.getElementById('quiz-question');
            const optionsElement = document.getElementById('quiz-options');
            const feedbackElement = document.getElementById('quiz-feedback');

            if (!quizArea) return; 

            if (index < scienceQuizQuestions.length) {
                const q = scienceQuizQuestions[index];
                questionElement.textContent = `Question ${index + 1}: ${q.question}`;
                optionsElement.innerHTML = ''; 
                feedbackElement.textContent = '';
                quizAnswered = false;

                const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);

                shuffledOptions.forEach(option => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'quiz-option';
                    optionDiv.textContent = option;
                    optionDiv.addEventListener('click', () => checkAnswer(option, q.correctAnswer, optionsElement, feedbackElement));
                    optionsElement.appendChild(optionDiv);
                });
            } else {
                questionElement.textContent = "Quiz Complete!";
                optionsElement.innerHTML = `<p>You have finished the available questions.</p><button onclick="loadQuizQuestion(0)" style="padding: 10px 20px; margin-top: 10px; background-color: #008080; color: white; border: none; border-radius: 5px; cursor: pointer;">Start Over</button>`;
                feedbackElement.textContent = '';
            }
        }
        
        function checkAnswer(selectedOption, correctAnswer, optionsContainer, feedbackElement) {
            if (quizAnswered) return; 
            quizAnswered = true;

            const options = optionsContainer.querySelectorAll('.quiz-option');
            let isCorrect = (selectedOption === correctAnswer);

            options.forEach(optionDiv => {
                optionDiv.style.pointerEvents = 'none'; 
                if (optionDiv.textContent === correctAnswer) {
                    optionDiv.classList.add('correct');
                    if (isCorrect) {
                        optionDiv.style.boxShadow = '0 0 10px #28a745';
                    }
                } else if (optionDiv.textContent === selectedOption) {
                    optionDiv.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                feedbackElement.textContent = "Correct! Well done.";
                feedbackElement.style.color = '#28a745';
                currentQuizIndex++;
                setTimeout(() => loadQuizQuestion(currentQuizIndex), 1500); 
            } else {
                feedbackElement.textContent = `Incorrect. The correct answer was: ${correctAnswer}.`;
                feedbackElement.style.color = '#dc3545';
                optionsContainer.innerHTML += `<button onclick="loadQuizQuestion(currentQuizIndex)" style="padding: 8px 15px; margin-top: 10px; background-color: #ffc107; color: black; border: none; border-radius: 5px; cursor: pointer;">Try Again</button>`;
            }
        }
        
        function bindScienceQuiz() {
            currentQuizIndex = 0;
            loadQuizQuestion(currentQuizIndex);
        }

        // --- 6 PM ZONE CONTENT MODULES ---
        const contentModules = {
            "math": `
                <section id="math-module" style="padding-bottom: 40px;">
                    <h3 style="color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 5px;">1. The City of Mathemágica: The Power of Numerals</h3>
                    
                    <p>Welcome to **Mathemágica**. Click on a row below to expand its content and view video links.</p>

                    <div class="collapsible-header" data-target="math-content-1">
                        1.1. Foundations: Digits and Place Value 
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="math-content-1" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li><a href="#" class="vid-link" data-video-key="video1" style="color: #007bff; font-weight: bold;">Meet the Digits (0, 1, 2)</a></li>
                            <li><a href="#" class="vid-link" data-video-key="video2" style="color: #007bff; font-weight: bold;">Counting Through Four (Introduction to Zero)</a></li>
                            <li><a href="#" class="vid-link" data-video-key="video3" style="color: #007bff; font-weight: bold;">Counting to Nine</a></li>
                        </ul>
                    </div>

                    <div class="collapsible-header" data-target="math-content-2">
                        1.2. Practice & Assessment: Digit Sequencing
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="math-content-2" class="collapsible-content">
                        <div style="padding: 15px; background-color: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;">
                            <h4>Task: Confirm the Sequence 0 to 9</h4>
                            <p>Click the button to count up. Confirm you know the next digit in the sequence.</p>
                            
                            <div style="display: flex; align-items: center; justify-content: center; margin-top: 15px;">
                                <button id="math-counter-btn" style="padding: 10px 20px; font-size: 1.2em; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                    Start Counting (0)
                                </button>
                                <span id="math-feedback" style="margin-left: 20px; font-weight: bold; color: #007bff;"></span>
                            </div>
                        </div>
                    </div>
                </section>
            `,
            "lang": `
                <section id="lang-module" style="padding-bottom: 40px;">
                    <h3 style="color: #6a0dad; border-bottom: 2px solid #6a0dad; padding-bottom: 5px;">2. The City of Linguistica: Vocabulary Nest</h3>
                    <p>Welcome to the **Vocabulary Nest**. Click on any section title below to load the list of available videos (lessons load to the 12 NOON Monitor).</p>

                    <div class="collapsible-header" data-target="content-2-1">
                        2.1. Foundation and Phonics (Vowel Sounds) 
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="content-2-1" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li><a href="#" class="vid-link" data-video-key="video5" style="color: #6a0dad; font-weight: bold;">Vowel Sounds and Pronunciation</a></li>
                            <li><a href="#" class="vid-link" data-video-key="video7" style="color: #6a0dad; font-weight: bold;">English Vowels (Dedicated Lesson)</a></li>
                        </ul>
                    </div>

                    <div class="collapsible-header" data-target="content-2-2">
                        2.2. Core Vocabulary Blocks (01-100) 
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="content-2-2" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li><a href="#" class="vid-link" data-video-key="video6" style="color: #6a0dad; font-weight: bold;">Vocabulary Set 01-20 (Bilingual Span/Glish)</a></li>
                            <li><a href="#" class="vid-link" data-video-key="video8" style="color: #6a0dad; font-weight: bold;">Vocabulary Set 21-40</a></li> 
                            <li>[Placeholder for Vocabulary Set 41-60]</li>
                            
                            <li>[Placeholder for Vocabulary Set 61-80]</li>
                            <li>[Placeholder for Vocabulary Set 81-100]</li>
                        </ul>
                    </div>
                    
                    <div class="collapsible-header" data-target="content-2-5">
                        2.5. Practice Area: Spelling & Recall
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="content-2-5" class="collapsible-content">
                        <div style="padding: 15px; background-color: #f7f3f9; border: 1px solid #6a0dad; border-radius: 5px;">
                            <h4>Task: Spell the Phonics Topic</h4>
                            <p>The first foundational lesson covered a key letter sound. **Spell that word:**</p>
                            
                            <div style="display: flex; align-items: center; justify-content: flex-start; margin-top: 15px;">
                                <input type="text" id="lang-input" placeholder="Enter word here" style="padding: 10px; font-size: 1em; border: 1px solid #ccc; border-radius: 4px; margin-right: 10px;">
                                <button id="lang-check-btn" style="padding: 10px 20px; font-size: 1em; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                    Check Spelling
                                </button>
                            </div>
                            <p id="lang-spelling-feedback" style="margin-top: 10px; font-size: 1em;"></p>
                        </div>
                    </div>
                    
                    <div class="collapsible-header" data-target="content-2-3">
                        2.3. Specialized/Thematic Vocabulary 
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="content-2-3" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li>[Placeholder for Thematic Block 1]</li>
                            <li>[Placeholder for Thematic Block 2]</li>
                        </ul>
                    </div>

                    <div class="collapsible-header" data-target="content-2-4">
                        2.4. Advanced Terminology and Etymology 
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="content-2-4" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li>[Placeholder for Advanced Terms]</li>
                        </ul>
                    </div>
                    
                    <p style="margin-top: 30px; border-top: 1px solid #ddd; padding-top: 15px;">**Note:** The total content list here, once fully populated, will contain your several hundred vocabulary videos.</p>
                </section>
            `,
            "sci": `
                <section id="sci-module" style="padding-bottom: 40px;">
                    <h3 style="color: #008080; border-bottom: 2px solid #008080; padding-bottom: 5px;">3. The City of Ciencia: Natural Systems</h3>
                    <p>Welcome to **Ciencia**. Explore natural systems, physics, and efficient cycles.</p>
                    
                    <div class="collapsible-header" data-target="sci-content-1" style="background-color: #e0f7fa; border-left-color: #008080;">
                        3.1. Physical Laws and Principles
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="sci-content-1" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li>[Placeholder for Gravity Video]</li>
                            <li>[Placeholder for Energy Video]</li>
                        </ul>
                    </div>
                    
                    <div class="collapsible-header" data-target="sci-content-2" style="background-color: #e0f7fa; border-left-color: #008080;">
                        3.2. Biological Cycles
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="sci-content-2" class="collapsible-content">
                        <p style="height: 100px; background-color: #f0ffff; padding: 10px;">[Interactive Placeholder: Water Cycle Simulation]</p>
                    </div>
                    
                    <div class="collapsible-header" data-target="sci-content-3" style="background-color: #e0f7fa; border-left-color: #008080;">
                        3.3. Assessment: Multiple Choice Quiz
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="sci-content-3" class="collapsible-content">
                        <div id="quiz-area" style="padding: 15px; background-color: #f0ffff; border: 1px solid #008080; border-radius: 5px;">
                            <h4 id="quiz-question">Question 1: What is the largest organ in the human body?</h4>
                            <div id="quiz-options">
                                </div>
                            <p id="quiz-feedback" style="margin-top: 15px; font-weight: bold;"></p>
                        </div>
                    </div>
                    
                </section>
            `,
            "hist": `
                <section id="hist-module" style="padding-bottom: 40px;">
                    <h3 style="color: #9c6e31; border-bottom: 2px solid #9c6e31; padding-bottom: 5px;">4. The City of Tempora: Chronology and Events</h3>
                    <p>Welcome to **Tempora**. We study the non-Petered-out linear progression of time and historical milestones.</p>

                    <div class="collapsible-header" data-target="hist-content-1" style="background-color: #fff3e0; border-left-color: #9c6e31;">
                        4.1. Ancient Civilizations
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="hist-content-1" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li>[Placeholder for Egyptian History Video]</li>
                        </ul>
                    </div>
                </section>
            `,
            "art": `
                <section id="art-module" style="padding-bottom: 40px;">
                    <h3 style="color: #d81b60; border-bottom: 2px solid #d81b60; padding-bottom: 5px;">5. The City of Creativa: Principles of Design</h3>
                    <p>Welcome to **Creativa**. Explore the expressive arts and the foundations of design.</p>
                    
                    <div class="collapsible-header" data-target="art-content-1" style="background-color: #fce4ec; border-left-color: #d81b60;">
                        5.1. Color Theory
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="art-content-1" class="collapsible-content">
                        <p style="height: 100px; background-color: #ffcdd2; padding: 10px;">[Interactive Placeholder: Color Wheel Tool]</p>
                    </div>
                </section>
            `,
            "music": `
                <section id="music-module" style="padding-bottom: 40px;">
                    <h3 style="color: #338800; border-bottom: 2px solid #338800; padding-bottom: 5px;">6. The City of Motus: Movement and Wellness</h3>
                    <p>Welcome to **Motus**. Focus on physical education, movement, and bodily health.</p>

                    <div class="collapsible-header" data-target="music-content-1" style="background-color: #e8f5e9; border-left-color: #338800;">
                        6.1. Basic Movement and Stretching
                        <span class="toggle-icon">▶</span>
                    </div>
                    <div id="music-content-1" class="collapsible-content">
                        <ul style="list-style-type: none; margin-left: 0;">
                            <li>[Placeholder for Stretching Routine Video]</li>
                        </ul>
                    </div>
                </section>
            `
        };

        // --- Dynamic Content Loading Function (6 PM Zone) ---
        function loadModule(moduleKey) {
            const moduleHTML = contentModules[moduleKey];
            if (moduleHTML) {
                learningContentArea.innerHTML = moduleHTML;
                
                const contentAreaElement = document.querySelector('.content-area');
                if (contentAreaElement) {
                    contentAreaElement.scrollTop = 0;
                }
                
                bindDynamicVideoLinks();
                bindCollapsibleHeaders(); 
                
                if (moduleKey === 'math') {
                    bindMathCounter();
                } else if (moduleKey === 'lang') {
                    bindSpellingCheck();
                } else if (moduleKey === 'sci') {
                    bindScienceQuiz();
                }
            } else {
                learningContentArea.innerHTML = `<h3 style="color: red;">Error: Module not found for key: ${moduleKey}</h3>`;
            }
        }
        
        // --- Function to bind video links in dynamic content ---
        function bindDynamicVideoLinks() {
            document.querySelectorAll('.vid-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    
                    const videoKey = link.getAttribute('data-video-key');
                    const videoUrl = videoSources[videoKey];
                    
                    const posterUrl = iconSources[videoKey] || 'https://storage.googleapis.com/noenbalde/Car%C3%A1tulas/Decillones.jpg';

                    if (videoUrl) {
                        launchVideoToMonitor(videoUrl, posterUrl);
                    } else {
                        console.error("Video URL not found for key:", videoKey);
                    }
                });
            });
        }
        
        // --- Function to bind collapsible headers (Loadable Rows) ---
        function bindCollapsibleHeaders() {
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', () => {
                    const targetId = header.getAttribute('data-target');
                    const content = document.getElementById(targetId);
                    const icon = header.querySelector('.toggle-icon');

                    if (content) {
                        const isActive = content.classList.contains('active');

                        const parentSection = header.closest('section');
                        if (parentSection) {
                            parentSection.querySelectorAll('.collapsible-content.active').forEach(c => {
                                if (c !== content) {
                                    c.classList.remove('active');
                                    const parentHeader = parentSection.querySelector(`.collapsible-header[data-target="${c.id}"]`);
                                    if (parentHeader) {
                                        parentHeader.querySelector('.toggle-icon').textContent = '▶';
                                    }
                                }
                            });
                        }
                        
                        if (!isActive) {
                            content.classList.add('active');
                            icon.textContent = '▼';
                        } else {
                            content.classList.remove('active');
                            icon.textContent = '▶';
                        }
                    }
                });
            });
        }


        // --- Event Listener for 9 PM Icons (Video Launch) ---
        document.querySelectorAll('.icon-item').forEach(iconLink => {
            iconLink.addEventListener('click', (event) => {
                event.preventDefault();
                
                const videoKey = iconLink.getAttribute('data-video-key');
                const videoUrl = videoSources[videoKey];
                
                const iconImageElement = iconLink.querySelector('img');
                const posterUrl = iconImageElement ? iconImageElement.src : null;

                if (videoUrl && posterUrl) {
                    launchVideoToMonitor(videoUrl, posterUrl);
                } else {
                    console.error("Video URL or Poster URL not found for key:", videoKey);
                }
            });
        });

        // --- Event Listener for 3 PM Links (Dynamic Content Load) ---
        document.querySelectorAll('.fixed-menu-item a').forEach(menuLink => {
            menuLink.addEventListener('click', (event) => {
                event.preventDefault();
                const moduleKey = menuLink.getAttribute('href').substring(1); 
                showMonitorPoster(); // Reset the monitor when switching modules
                loadModule(moduleKey);
            });
        });

        if (closeVideoBtn) {
            closeVideoBtn.addEventListener('click', closeVideoWindow);
        }
        
        // Initial State Setup: Show default poster and load the first module
        showMonitorPoster(); 
        loadModule('math'); 
        
    </script>
</body>
</html>
