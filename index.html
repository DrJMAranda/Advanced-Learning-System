<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEA-ALS‚Ñ¢</title>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #f4f4f9; color: #333; }
        .container { max-width: 1300px; margin: 20px auto; }
        h1 { text-align: center; color: #1e40af; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); background-color: white; }
        th, td { border: 1px solid #ddd; padding: 8px 6px; text-align: center; }
        th { background-color: #3b82f6; color: white; font-weight: bold; }
        
        /* Estilos para el estado binario */
        .module-cell { cursor: pointer; background-color: #fff; transition: background-color 0.3s; } /* Blanco es lanzable */
        .module-cell.state-0 { background-color: #d1d5db; color: #6b7280; cursor: default; } /* Gris es vac√≠o de contenido */
        .module-cell:hover:not(.state-0):not(.state-1) { background-color: #e0f2f1; }
        .state-1 { background-color: #10b981; color: white; font-weight: bold; } /* Verde: Luz Conservada */
        .locked { cursor: not-allowed; background-color: #ef4444 !important; color: white; animation: shake 0.5s; } /* Rojo: Bloqueo/Violaci√≥n */

        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }

        /* Estilos espec√≠ficos para las columnas de contexto */
        .context-cell { background-color: #e0f2f1; font-style: italic; font-size: 0.9em; cursor: default; }
    </style>
</head>
<body>
    <div class="container">
        <h1>SEA-ALS‚Ñ¢</h1>
        <h2>Jos√© M. Arranda, PhD¬©</h2>
        <h2><p>Developed and Programmed by ARAGEM</p></h2>
        <table id="performanceTable">
            <thead>
                <tr>
                    <th rowspan="2">Arithmetic</th>
                    <th colspan="6">Language</th>
                    <th rowspan="2">Voc (Y)</th>
                    <th rowspan="2">Lit</th>
                    <th colspan="6">Numbs</th>
                </tr>
                <tr>
                    <th>Eng</th>
                    <th>Spa</th>
                    <th>Por</th>
                    <th>Tag</th>
                    <th>Fre</th>
                    <th>Dut</th>
                </tr>
            </thead>
            <tbody>
                <tr data-row-id="1"><td>A1S1</td><td class="module-cell state-1" data-subj="Arit_Ref">1</td><td class="module-cell state-1" data-subj="Eng">1</td><td class="module-cell state-0" data-subj="Spa"></td><td class="module-cell state-0" data-subj="Por"></td><td class="module-cell state-0" data-subj="Tag"></td><td class="module-cell state-0" data-subj="Fre"></td><td class="module-cell state-0" data-subj="Gua"></td><td class="module-cell state-1" data-subj="Vocb" data-seq="1">1</td><td class="module-cell state-1" data-subj="Lit">Justicia</td><td class="context-cell">N</td><td class="context-cell">Z</td><td class="context-cell">Q</td><td class="context-cell">R\Q</td><td class="context-cell">R</td><td class="context-cell">C</td></tr>
                <tr data-row-id="2"><td>A1S2</td><td class="module-cell state-1" data-subj="Arit_Ref">1</td><td class="module-cell" data-subj="Eng"></td><td class="module-cell state-0" data-subj="Spa"></td><td class="module-cell state-0" data-subj="Por"></td><td class="module-cell state-0" data-subj="Tag"></td><td class="module-cell state-0" data-subj="Fre"></td><td class="module-cell state-0" data-subj="Gua"></td><td class="module-cell state-1" data-subj="Vocb" data-seq="2">1</td><td class="module-cell state-1" data-subj="Lit">Constancia</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="3"><td>A1S3</td><td class="module-cell state-1" data-subj="Arit_Ref">1</td><td class="module-cell" data-subj="Eng"></td><td class="module-cell state-0" data-subj="Spa"></td><td class="module-cell state-0" data-subj="Por"></td><td class="module-cell state-0" data-subj="Tag"></td><td class="module-cell state-0" data-subj="Fre"></td><td class="module-cell state-0" data-subj="Gua"></td><td class="module-cell state-1" data-subj="Vocb" data-seq="3">1</td><td class="module-cell state-1" data-subj="Lit">Responsabilidad</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="4"><td>A2</td><td class="module-cell state-1" data-subj="Arit_Ref">1</td><td class="module-cell" data-subj="Eng"></td><td class="module-cell state-0" data-subj="Spa"></td><td class="module-cell state-0" data-subj="Por"></td><td class="module-cell state-0" data-subj="Tag"></td><td class="module-cell state-0" data-subj="Fre"></td><td class="module-cell state-0" data-subj="Gua"></td><td class="module-cell state-1" data-subj="Vocb" data-seq="4">1</td><td class="module-cell state-1" data-subj="Lit">Libertad</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell">R</td><td class="context-cell"></td></tr>
                <tr data-row-id="5"><td>A3</td><td class="module-cell state-1" data-subj="Arit_Ref">1</td><td class="module-cell" data-subj="Eng"></td><td class="module-cell state-0" data-subj="Spa"></td><td class="module-cell state-0" data-subj="Por"></td><td class="module-cell state-0" data-subj="Tag"></td><td class="module-cell state-0" data-subj="Fre"></td><td class="module-cell state-0" data-subj="Gua"></td><td class="module-cell state-1" data-subj="Vocb" data-seq="5">1</td><td class="module-cell state-1" data-subj="Lit">Verdad</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell">C</td></tr>
                <tr data-row-id="6"><td>A4</td><td class="module-cell state-1" data-subj="Arit_Ref">1</td><td class="module-cell" data-subj="Eng"></td><td class="module-cell state-0" data-subj="Spa"></td><td class="module-cell state-0" data-subj="Por"></td><td class="module-cell state-0" data-subj="Tag"></td><td class="module-cell state-0" data-subj="Fre"></td><td class="module-cell state-0" data-subj="Gua"></td><td class="module-cell state-1" data-subj="Vocb" data-seq="6">1</td><td class="module-cell state-1" data-subj="Lit">Honestidad</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell">A+b$\sqrt{-1}$</td></tr>
                
                <tr data-row-id="7"><td>A5</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="7">0</td><td class="module-cell" data-subj="Lit">Resp. Personal</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="8"><td>A6</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="8">0</td><td class="module-cell" data-subj="Lit">Servicio Com.</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="9"><td>A7</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="9">0</td><td class="module-cell" data-subj="Lit">Empat√≠a</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="10"><td>A8</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="10">0</td><td class="module-cell" data-subj="Lit">Cooperaci√≥n</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="11"><td>A9</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="11">0</td><td class="module-cell" data-subj="Lit">Persistencia</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="12"><td>A10</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="12">0</td><td class="module-cell" data-subj="Lit">Autodisciplina</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="13"><td>A11</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="13">0</td><td class="module-cell" data-subj="Lit">Humildad</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="14"><td>A12</td><td class="module-cell" data-subj="Arit_Ref">0</td><td class="module-cell" data-subj="Eng">0</td><td class="module-cell state-0" data-subj="Spa">0</td><td class="module-cell state-0" data-subj="Por">0</td><td class="module-cell state-0" data-subj="Tag">0</td><td class="module-cell state-0" data-subj="Fre">0</td><td class="module-cell state-0" data-subj="Gua">0</td><td class="module-cell" data-subj="Vocb" data-seq="14">0</td><td class="module-cell" data-subj="Lit">Paciencia</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
                <tr data-row-id="15"><td>A13</td><td class="module-cell" data-subj="Arit_Ref" data-is-final="true">0</td><td class="module-cell" data-subj="Eng" data-is-final="true">0</td><td class="module-cell state-0" data-subj="Spa" data-is-final="true">0</td><td class="module-cell state-0" data-subj="Por" data-is-final="true">0</td><td class="module-cell state-0" data-subj="Tag" data-is-final="true">0</td><td class="module-cell state-0" data-subj="Fre" data-is-final="true">0</td><td class="module-cell state-0" data-subj="Gua" data-is-final="true">0</td><td class="module-cell" data-subj="Vocb" data-seq="15">0</td><td class="module-cell" data-subj="Lit" data-is-final="true">Conciencia</td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td><td class="context-cell"></td></tr>
            </tbody>
        </table>

        <div id="statusMessage" style="margin-top: 20px; padding: 10px; background-color: #eee; border-radius: 5px; text-align: center;">El √≠ndice se ha poblado y est√° gobernando.</div>

        <div id="iconContainer" style="text-align: center; margin-top: 15px; font-size: 2em; color: #1e40af; min-height: 40px;"></div>
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const table = document.getElementById('performanceTable');
            const statusDiv = document.getElementById('statusMessage');
            const iconContainer = document.getElementById('iconContainer'); 
            
            // Funci√≥n de ayuda: obtiene el estado binario (1 o 0) de un Hol√≥n exclusivo por su ID
            function getEstado(id) {
                const cell = document.getElementById(id);
                if (!cell) return false;
                return cell.classList.contains('state-1');
            }

            // --- üö© FLAG: INICIO DE LA FUNCI√ìN DE LANZAMIENTO (LAUNCH_MODULE_START) üö© ---
            function launchModule(rowId, subjId, cellId) {
                // Modificar esta secci√≥n para tu base de almacenamiento
                const BASE_URL_STORAGE = "https://storage.googleapis.com/noenbalde/"; 
                const BASE_FOLDERS = {
                    'Lit': 'Curriculum/Language/Literature/',
                    'Vocb': 'Curriculum/Language/Vocabulary/',
                    'Eng': 'Curriculum/Mathematics/Arithmetic/', 
                    'Spa': 'Curriculum/Mathematics/Arithmetic/',
                    'Por': 'Curriculum/Mathematics/Arithmetic/',
                    'Tag': 'Curriculum/Mathematics/Arithmetic/',
                    'Fre': 'Curriculum/Mathematics/Arithmetic/',
                    'Gua': 'Curriculum/Mathematics/Arithmetic/',
                    'Arit_Ref': 'Curriculum/Mathematics/Arithmetic/', // Para referencia
                };

                const moduleName = cellId.split('_')[0]; 
                const folderPath = BASE_FOLDERS[subjId] || 'Curriculum/';
                
                // Determinamos el c√≥digo de idioma/valor para el archivo (Z)
                let fileCode = '';
                if (['Eng', 'Spa', 'Por', 'Tag', 'Fre', 'Gua'].includes(subjId)) {
                    fileCode = subjId.toUpperCase().substring(0, 3);
                } else if (subjId === 'Lit') {
                    const litCell = document.getElementById(cellId);
                    // Usar el primer token del texto (Ej: 'Justicia')
                    fileCode = litCell.textContent.split(' ')[0]; 
                } else if (subjId === 'Vocb') {
                    // Usar el nivel de vocabulario (Ej: 'LV1')
                    fileCode = document.getElementById(cellId).textContent;
                } else if (subjId === 'Arit_Ref') {
                    // Usar el nombre del m√≥dulo (Ej: A1S1)
                    fileCode = moduleName;
                }

                // üöÄ L√çNEA DE C√ìDIGO CLAVE PARA LA EVOCACI√ìN (El Empuje del Fot√≥n) üöÄ
                const filePath = `${BASE_URL_STORAGE}${folderPath}${moduleName}${fileCode}.mp4`;
                
                window.open(filePath, '_blank');
                statusDiv.textContent = `üöÄ Lanzamiento Exitoso: Hol√≥n ${cellId} evocado. URL: ${filePath}`;
            }
            // --- üö© FLAG: FIN DE LA FUNCI√ìN DE LANZAMIENTO (LAUNCH_MODULE_END) üö© ---


            // --- üö© FLAG: INICIO DE LA L√ìGICA DEL GUARDI√ÅN DEL ORDEN (TOGGLE_MODULE_STATE_START) üö© ---
            function toggleModuleState(cell) {
                const rowId = parseInt(cell.parentElement.dataset.rowId);
                const subjId = cell.dataset.subj;
                const cellId = cell.id;

                // üõë RESTRICCI√ìN R√çGIDA: No interactuar con celdas de contexto o de Referencia
                if (cell.classList.contains('context-cell') || subjId === 'Arit_Ref' || subjId === 'Vocb') {
                    return; 
                }

                // Si la celda est√° en estado 0 (Gris), significa Vac√≠o de Contenido y no es Lanzable.
                if (cell.classList.contains('state-0')) {
                    statusDiv.textContent = `üö´ Hol√≥n ${cellId}: Vac√≠o de Contenido (Gris). No es lanzable.`;
                    return;
                }

                // 1. Ya Rectificado (Luz Conservada) - Si ya est√° activo, lanzar de nuevo.
                if (getEstado(cellId)) {
                    iconContainer.innerHTML = '‚ú®'; 
                    setTimeout(() => iconContainer.innerHTML = '', 500); 
                    launchModule(rowId, subjId, cellId);
                    return;
                }

                // --- V E R I F I C A C I √ì N ---

                // A. Control de Linealidad (Axioma de la Linealidad - Eje X)
                if (rowId > 1) {
                    const previousRowId = rowId - 1;
                    const previousCellId = `A${previousRowId}_${subjId}`;
                    
                    if (!getEstado(previousCellId)) {
                        cell.classList.add('locked');
                        statusDiv.textContent = `‚ùå ERROR: Violaci√≥n de la Linealidad. M√≥dulo anterior ${previousCellId} debe ser 1.`;
                        setTimeout(() => cell.classList.remove('locked'), 1500);
                        return;
                    }
                    
                    // B. Control de Secuencia (Requisito Principal: Columna Lit/Valores)
                    const requiredLitId = `A${previousRowId}_Lit`;
                    const requiredAritRefId = `A${previousRowId}_Arit_Ref`;
                    
                    // Si la celda actual NO es Literatura, necesitamos la Lit del nivel anterior
                    if (subjId !== 'Lit' && !getEstado(requiredLitId)) {
                        cell.classList.add('locked');
                        statusDiv.textContent = `‚ùå ERROR: Requiere Rectificaci√≥n de Valores/Lit (${requiredLitId}) para avanzar.`;
                        setTimeout(() => cell.classList.remove('locked'), 1500);
                        return;
                    }
                    // Si la celda actual NO es Aritm√©tica/Idioma, necesitamos la Aritm√©tica del nivel anterior
                    if (subjId !== 'Arit_Ref' && !['Eng', 'Spa', 'Por', 'Tag', 'Fre', 'Gua'].includes(subjId) && !getEstado(requiredAritRefId)) {
                        cell.classList.add('locked');
                        statusDiv.textContent = `‚ùå ERROR: Requiere Rectificaci√≥n de Aritm√©tica (${requiredAritRefId}) para avanzar.`;
                        setTimeout(() => cell.classList.remove('locked'), 1500);
                        return;
                    }

                }
                
                // C. Activaci√≥n Final (Rectificaci√≥n Lograda)
                cell.classList.remove('state-0');
                cell.classList.add('state-1');
                cell.textContent = '1';
                statusDiv.textContent = `‚úÖ √âxito Binario: Hol√≥n ${cellId} activado (Luz Conservada). Rectificaci√≥n Lograda.`;

                iconContainer.innerHTML = '‚ú®'; 
                setTimeout(() => iconContainer.innerHTML = '', 500);
                
                // Lanzar el contenido inmediatamente despu√©s de la activaci√≥n
                launchModule(rowId, subjId, cellId);
            }
            // --- üö© FLAG: FIN DE LA L√ìGICA DEL GUARDI√ÅN DEL ORDEN (TOGGLE_MODULE_STATE_END) üö© ---


            // Inicializaci√≥n y poblamiento de la matriz 
            table.querySelectorAll('tbody tr').forEach(row => {
                const rowId = row.dataset.rowId;
                
                row.querySelectorAll('.module-cell, .context-cell').forEach(cell => {
                    const subjId = cell.dataset.subj;
                    const cellId = `A${rowId}_${subjId}`;
                    cell.id = cellId; 

                    if (cell.classList.contains('module-cell')) {
                        cell.addEventListener('click', () => toggleModuleState(cell));
                    }
                    
                    // Sincronizar el estado de la Matriz con el estado conservado
                    if (cell.classList.contains('state-1')) {
                        cell.textContent = '1';
                    } else if (!cell.classList.contains('context-cell')) {
                        // Asumir blanco (lanzable) a menos que se indique 'state-0' (gris)
                        cell.textContent = '0'; 
                    }
                    
                    // Asegurar que las celdas de referencia no se vean afectadas por el clic
                    if (subjId === 'Arit_Ref' || subjId === 'Vocb' || subjId === 'Lit') {
                        cell.classList.remove('module-cell');
                    }
                });
            });

            statusDiv.textContent = "El √≠ndice se ha poblado y est√° gobernando.";
        });
    </script>
</body> 
</html>
